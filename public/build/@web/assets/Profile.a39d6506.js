import{m as r}from"./vuex.db5583be.js";import{a as o,C as l,n}from"./app.84788141.js";import{b as c}from"./qrcode.124b3fa5.js";import"./vue-recaptcha.ac7b26c4.js";import"./vue.2fdc5d8e.js";import"./after.f5f6eafa.js";import"./@glidejs.c34926ed.js";import"./overlayscrollbars.16146508.js";import"./gsap.10236bb8.js";import"./bitcoin-units.c392cbba.js";import"./big.js.5a739493.js";import"./jquery.a5d8725e.js";import"./lodash.a4543754.js";import"./axios.372962c2.js";import"./laravel-echo.1870cf92.js";import"./socket.io-client.4c8cf9d1.js";import"./parseuri.1963fa84.js";import"./socket.io-parser.6220f9fe.js";import"./component-emitter.72d4fec7.js";import"./isarray.396bc49a.js";import"./engine.io-client.915a8ff3.js";import"./has-cors.150b278c.js";import"./engine.io-parser.2ae49814.js";import"./has-binary2.8a78c161.js";import"./arraybuffer.slice.9c094f68.js";import"./base64-arraybuffer.8e0339d2.js";import"./blob.387277be.js";import"./parseqs.ede9f166.js";import"./component-inherit.7edfe7ae.js";import"./yeast.d32d0463.js";import"./indexof.a4b72e6b.js";import"./to-array.b41ea466.js";import"./component-bind.d6d60fa3.js";import"./backo2.46430cfe.js";import"./vue-router.21875538.js";import"./vue-i18n.85d99549.js";import"./vuex-persistedstate.4cde3667.js";import"./vue-izitoast.758affc3.js";import"./vue-feather.e39d5e52.js";import"./feather-icons.5fdfdf40.js";import"./v-mask.d150318c.js";import"./v-click-outside.91688d80.js";import"./vue-infinite-scroll.16ae2245.js";import"./@chenfengyuan.9943b948.js";import"./v-tooltip.0d9af9d3.js";import"./@babel.aa9208ce.js";import"./popper.js.d3cea3a7.js";import"./vue-resize.e71c9b02.js";import"./vue-context.518fc610.js";import"./vue-clickaway.dacb5831.js";import"./vue-content-placeholders.fb834830.js";import"./overlayscrollbars-vue.6a31e3e1.js";import"./country-flag-emoji-polyfill.38b8e49f.js";import"./is-emoji-supported.c13a6994.js";import"./apexcharts.1d8667f6.js";import"./howler.7d01981f.js";import"./encode-utf8.c8acd0c0.js";import"./dijkstrajs.f17cb91e.js";const p={data(){return{profile:null,tab:window.location.hash.length>0?window.location.hash.substr(1):"info",tfa_code:"",tfa_loading:!1,userGames:[],gamesPage:0,email:"",old_password:"",new_password:"",confirm_password:"",avatarInit:!1,chartInit:!1}},computed:{...r(["isGuest","currencies","games","user","theme","fiatView"])},created(){axios.post("/api/profile/getUser",{id:this.$route.params.tag}).then(({data:i})=>{this.profile=i,this.email=this.profile.user.email})},watch:{tab(){this.loadTab()},profile(){this.loadTab()}},methods:{logout(){this.$store.dispatch("logout"),this.$router.push("/")},loadGames(){this.tab==="info"&&this.profile&&axios.get(`/api/user/games/${this.profile.user._id}/${this.gamesPage}`).then(({data:i})=>{this.gamesPage+=1,this.userGames=this.userGames.concat(i)})},openOverviewModal(i,t){o.methods.open(i,t)},updatePassword(){if(this.confirm_password!==this.new_password){this.$toast.error(this.$i18n.t("general.error.invalid_password_confirm"));return}axios.post("/api/user/changePassword",{old:this.old_password,new:this.new_password}).then(()=>this.$toast.success(this.$i18n.t("general.profile.password_changed"))).catch(()=>{this.$toast.error(this.$i18n.t("general.error.invalid_password_confirm"))})},updateEmail(){axios.post("/api/user/updateEmail",{email:this.email}).then(()=>{this.$toast.success(this.$i18n.t("bonus.promo.success"))}).catch(()=>{this.$toast.error(this.$i18n.t("general.profile.invalid_email"))})},loadTab(){setTimeout(()=>{this.tab==="security"&&$("#qrcanvas").length>0&&c.toCanvas($("#qrcanvas")[0],this.profile.qr),this.tab==="info"&&(this.gamesPage=0,this.loadGames(),_.forEach(this.currencies,i=>{if($(`#profit-${i.name}`).length===0)return;const t=new ApexCharts(document.querySelector(`#profit-${i.name}`),{series:[{name:"",data:[]}],noData:{text:this.$i18n.t("general.profile.chart.loading")},chart:{zoom:{enabled:!1},toolbar:{show:!1},type:"area",height:100},dataLabels:{enabled:!1},stroke:{colors:[this.theme==="dark"?"#ec487f":"#1652f0"]},xaxis:{type:"numeric",axisBorder:{show:!1},axisTicks:{show:!1},labels:{show:!1},tooltip:{enabled:!1}},yaxis:{tickAmount:1,floating:!1,decimalsInFloat:8,labels:{show:!1},axisBorder:{show:!1},axisTicks:{show:!1}},fill:{type:"gradient",colors:[this.theme==="dark"?"#ec487f":"#1652f0"],gradient:{shadeIntensity:1,inverseColors:!1,opacityFrom:.5,opacityTo:0,stops:[0,90,100]}},tooltip:{x:{show:!1},fixed:{enabled:!1,position:"topRight"}},grid:{borderColor:"transparent",yaxis:{lines:{offsetX:-30}},padding:{left:-10,right:0}}});t.render();const e=a=>{t.updateSeries([{name:this.$i18n.t("general.profit"),data:[]}]),axios.post("/api/user/graph",{user:this.profile.user._id,interval:a,currency:i.id}).then(({data:s})=>{t.updateSeries([{name:this.$i18n.t("general.profit"),data:s}])})};e("today"),$(`[data-switcher-currency="${i.id}"]`).on("click",function(){$(this).hasClass("active")||($(this).parent().find(".switcher").removeClass("active"),$(this).addClass("active"),e($(this).data("interval")==="today"?"today":parseInt($(this).data("interval"))))})}))},100)},enable2FA(){this.tfa_loading=!0,axios.post("/api/user/2fa_enable",{"2facode":this.profile.secret,"2faucode":this.tfa_code}).then(()=>{window.location.hash="security",window.location.reload()}).catch(()=>{this.tfa_loading=!1,this.$toast.error(this.$i18n.t("general.profile.error_2fa"))})},disable2FA(){axios.post("/api/user/2fa_disable").then(()=>{window.location.hash="security",window.location.reload()})},togglePrivateProfile(){axios.get("/api/settings/privacy_toggle")},togglePrivateBets(){axios.get("/api/settings/privacy_bets_toggle")},openClientSeedModal(){l.methods.open()},uploadAvatar(){this.avatarInit||($("[data-file]").on("change",()=>{const i=new FormData;i.append("image",$("[data-file]")[0].files[0]),axios.post("/api/settings/avatar",i).then(()=>this.$router.go()).catch(()=>this.$toast.error("Unknown error"))}),this.avatarInit=!0),$("[data-file]").click()}}};var d=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadGames,expression:"loadGames"}],staticClass:"container"},[t.profile?t._e():e("loader",{staticClass:"profile-loader"}),t.profile?e("div",{staticClass:"profile-container"},[e("div",{staticClass:"profile-header"},[e("div",{staticClass:"profile"},[e("div",{staticClass:"avatar"},[e("img",{attrs:{src:t.profile.user.avatar,alt:""}})]),e("div",{staticClass:"name"},[t._v(" "+t._s(t.profile.user.name)+" ")])]),e("div",{staticClass:"profileMenuContainer"},[e("div",{staticClass:"profileMenu os-host-flexbox w-100"},[e("overlay-scrollbars",{attrs:{options:{scrollbars:{autoHide:"leave"},className:"os-theme-thin-light"}}},[e("div",{class:`tab ${t.tab==="info"?"active":""}`,on:{click:function(a){t.tab="info"}}},[t._v(t._s(t.$t("general.head.profile"))+" ")]),t.profile.isOwner?e("div",{class:`tab ${t.tab==="security"?"active":""}`,on:{click:function(a){t.tab="security"}}},[t._v(t._s(t.$t("general.profile.security"))+" ")]):t._e(),t.profile.isOwner?e("div",{class:`tab ${t.tab==="settings"?"active":""}`,on:{click:function(a){t.tab="settings"}}},[t._v(t._s(t.$t("general.profile.settings"))+" ")]):t._e(),t.profile.isOwner?e("div",{staticClass:"tab",on:{click:t.logout}},[t._v(t._s(t.$t("general.head.logout")))]):t._e()])],1)])]),e("div",{staticClass:"profile-content"},[!t.profile.isOwner&&t.profile.user.private_profile&&(!t.user||!t.$checkPermission("ignore_privacy"))?e("div",{staticClass:"incognito"},[e("img",{attrs:{src:"/img/misc/incognito-dark.png","data-incognito-dark":""}}),e("img",{attrs:{src:"/img/misc/incognito-default.png","data-incognito-white":""}}),e("div",{staticClass:"incognito-desc"},[t._v(" "+t._s(t.$t("general.profile.incognito"))+" ")])]):t.tab==="info"?e("div",{staticClass:"tab_content"},[t.profile.games===0?e("div",{staticClass:"incognito"},[e("i",{staticClass:"fal fa-history"}),e("div",{staticClass:"incognito-desc"},[t._v(" "+t._s(t.$t("general.profile.empty"))+" ")])]):[e("div",{staticClass:"cat"},[t._v(t._s(t.$t("general.profile.latest_games")))]),e("table",{staticClass:"live-table"},[e("thead",[e("tr",[e("th",[t._v(t._s(t.$t("general.bets.game")))]),e("th",{staticClass:"d-none d-md-table-cell"},[t._v(t._s(t.$t("general.bets.time")))]),e("th",{staticClass:"d-none d-md-table-cell"},[t._v(t._s(t.$t("general.bets.bet")))]),e("th",{staticClass:"d-none d-md-table-cell"},[t._v(t._s(t.$t("general.bets.mul")))]),e("th",[t._v(t._s(t.$t("general.bets.win")))])])]),e("tbody",{staticClass:"live_games"},t._l(t.userGames,function(a){return e("tr",[e("th",[e("div",{staticClass:"gameIcon",staticStyle:{display:"flex","align-items":"center"}},[e("router-link",{attrs:{to:"/casino/game/"+a.metadata.id,tag:"div"}},[e("img",{attrs:{src:a.metadata.category.includes("originals")?"/icons/original.svg":a.metadata.category.includes("slots")?"/icons/slots.svg":"icons/casino.svg",alt:"ORIGINALS"}})]),e("div",{staticClass:"name",staticStyle:{"margin-left":"5px"}},[e("div",[e("router-link",{attrs:{to:"/casino/game/"+a.metadata.id}},[t._v(t._s(a.metadata.name))])],1)])],1)]),e("th",{staticClass:"d-none d-md-table-cell"},[e("div",[t._v(" "+t._s(new Date(a.game.created_at).toLocaleString())+" ")])]),e("th",{staticClass:"d-none d-md-table-cell",attrs:{"data-highlight":""}},[e("div",[e("web-icon",{style:{color:t.currencies[a.game.currency].style},attrs:{icon:t.currencies[a.game.currency].icon}}),e("unit",{staticStyle:{"margin-left":"5px"},attrs:{fiat:t.fiatView,to:a.game.currency,value:a.game.wager}})],1)]),e("th",{staticClass:"d-none d-md-table-cell",attrs:{"data-highlight":""}},[e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("img",{staticStyle:{"margin-right":"5px"},attrs:{src:"/img/increase.svg"}}),t._v(" "+t._s((a.game.status==="win"||a.game.multiplier<1?a.game.multiplier:0).toFixed(2))+"x ")])]),e("th",[e("div",{class:a.game.status==="win"?"live-win":""},[e("web-icon",{style:{color:t.currencies[a.game.currency].style},attrs:{icon:t.currencies[a.game.currency].icon}}),e("unit",{staticStyle:{"margin-left":"5px"},attrs:{fiat:t.fiatView,to:a.game.currency,value:a.game.profit}})],1)])])}),0)])]],2):t._e(),t.profile.isOwner&&t.tab==="security"?e("div",{staticClass:"tab_content"},[e("div",{staticClass:"cat"},[t._v(t._s(t.$t("general.profile.general")))]),e("div",{staticClass:"input-profile-group"},[e("div",[t._v(t._s(t.$t("general.profile.login")))]),e("input",{staticStyle:{opacity:".5"},attrs:{placeholder:"Login",disabled:""},domProps:{value:t.profile.user.name}})]),e("div",{staticClass:"input-profile-group"},[e("div",[t._v(t._s(t.$t("general.profile.email")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{placeholder:"Email",type:"email"},domProps:{value:t.email},on:{input:function(a){a.target.composing||(t.email=a.target.value)}}}),e("button",{staticClass:"btn btn-primary",on:{click:t.updateEmail}},[t._v(t._s(t.$t("general.profile.update")))])]),e("div",{staticClass:"cat"},[t._v(t._s(t.$t("general.profile.password")))]),e("div",{staticClass:"input-profile-group"},[e("div",[t._v(t._s(t.$t("general.profile.password_current")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.old_password,expression:"old_password"}],attrs:{type:"password"},domProps:{value:t.old_password},on:{input:function(a){a.target.composing||(t.old_password=a.target.value)}}})]),e("div",{staticClass:"input-profile-group"},[e("div",[t._v(t._s(t.$t("general.profile.password_new")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.new_password,expression:"new_password"}],attrs:{type:"password"},domProps:{value:t.new_password},on:{input:function(a){a.target.composing||(t.new_password=a.target.value)}}})]),e("div",{staticClass:"input-profile-group"},[e("div",[t._v(t._s(t.$t("general.profile.password_repeat")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.confirm_password,expression:"confirm_password"}],attrs:{type:"password"},domProps:{value:t.confirm_password},on:{input:function(a){a.target.composing||(t.confirm_password=a.target.value)}}}),e("button",{staticClass:"btn btn-primary",on:{click:t.updatePassword}},[t._v(t._s(t.$t("general.profile.password_reset")))])]),e("div",{staticClass:"cat"},[t._v(t._s(t.$t("general.profile.2fa")))]),e("div",{staticClass:"settingsNotify",staticStyle:{"text-align":"left"}},[t.tfa_loading?e("div",{staticClass:"settingsNotifyLoading"},[e("loader")],1):t._e(),t.profile.user.tfa_enabled?[e("div",{staticClass:"text-center",domProps:{innerHTML:t._s(t.$t("general.profile.2fa_enabled"))}}),e("button",{staticClass:"btn btn-primary mt-2 btn-block",on:{click:t.disable2FA}},[t._v(t._s(t.$t("general.profile.disable_2fa"))+" ")])]:[t._v(" "+t._s(t.$t("general.profile.copy_this_to_2fa"))+" "),e("input",{staticClass:"mt-1",staticStyle:{cursor:"pointer !important"},attrs:{onclick:"this.select()",type:"text",readonly:""},domProps:{value:t.profile.secret}}),e("div",{staticClass:"mt-2"},[e("div",{staticClass:"text-center mb-2 mt-2"},[t._v(t._s(t.$t("general.profile.keep_secure")))]),e("canvas",{staticClass:"d-flex ml-auto mr-auto",attrs:{id:"qrcanvas"}})]),e("div",[t._v(t._s(t.$t("general.profile.2fa_code")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tfa_code,expression:"tfa_code"}],staticClass:"mt-1",attrs:{type:"text"},domProps:{value:t.tfa_code},on:{input:function(a){a.target.composing||(t.tfa_code=a.target.value)}}}),e("button",{staticClass:"btn btn-primary mt-2 btn-block",on:{click:t.enable2FA}},[t._v(t._s(t.$t("general.profile.2fa_enable"))+" ")])]],2)]):t._e(),t.profile.isOwner&&t.tab==="settings"?e("div",{staticClass:"tab_content"},[e("div",{staticClass:"avatar-settings"},[e("img",{attrs:{alt:"",src:t.profile.user.avatar}}),e("input",{staticClass:"d-none",attrs:{type:"file","data-file":""}}),e("button",{staticClass:"btn btn-primary",on:{click:t.uploadAvatar}},[t._v(t._s(t.$t("general.profile.change_avatar")))])]),e("div",{staticClass:"cat"},[t._v(t._s(t.$t("general.profile.privacy")))]),e("div",{staticClass:"toggle"},[e("label",{staticClass:"form-check-label"},[t._v(t._s(t.$t("general.profile.set_private_profile")))]),e("web-switch",{attrs:{value:t.profile.user.private_profile,onChange:t.togglePrivateProfile}})],1),e("div",{staticClass:"toggle"},[e("label",{staticClass:"form-check-label"},[t._v(t._s(t.$t("general.profile.set_private_bets")))]),e("web-switch",{attrs:{value:t.profile.user.private_bets,onChange:t.togglePrivateBets}})],1),e("div",{staticClass:"cat"},[t._v(t._s(t.$t("general.profile.fairness")))]),e("div",[t._v(t._s(t.$t("general.profile.client_seed")))]),e("a",{attrs:{href:"javascript:void(0)"},on:{click:t.openClientSeedModal}},[t._v(t._s(t.profile.user.client_seed))])]):t._e()])]):t._e()],1)},m=[],f=n(p,d,m,!1,null,null,null,null);const bt=f.exports;export{bt as default};
