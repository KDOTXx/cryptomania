import{D as w}from"./DashboardSpinner.225c547d.js";import{m as g}from"./marked.733c0503.js";import{_ as y,W as k}from"./app.f6b791b5.js";import{_ as x}from"./LoadingModal.a415cab1.js";import{_ as r}from"./CompilerModalOutput.6f9ec5f7.js";import{f as l,A as e,s as C,F as c,C as m,D as a,x as V,g as D,v as _,e as d,N as I,O as N,Q as v}from"./@vue.ca773235.js";import"./vue.9ea8e8a6.js";import"./vuex.497f08d2.js";import"./overlayscrollbars.8d928870.js";import"./apexcharts.8dc8f2aa.js";import"./string-similarity.860833b6.js";import"./gsap.8449ad8c.js";import"./vue-router.63e2ccab.js";import"./vuex-persistedstate.fa252374.js";import"./izitoast.765d8918.js";import"./click-outside-vue3.6791b41e.js";import"./floating-vue.8db45bbf.js";import"./@floating-ui.9bdab495.js";import"./axios.ea6880df.js";import"./@vuepic.b319e7e5.js";import"./date-fns.5b6f9246.js";import"./LoaderAnimation.f430cb8d.js";const T={data(){return{version:null,data:null}},watch:{version(){this.$bus.$emit("loading:done")}},setup(){return{marked:g}},created(){window.axios.get("/api/version").then(({data:s})=>this.version=s.version),window.axios.post("/admin/update/check").then(({data:s})=>{this.data=s})},methods:{install(){x.methods.open().then(s=>{window.axios.post("/admin/update/install").then(()=>{s(),setTimeout(()=>window.location.reload(),1500)}).catch(n=>{window.$bus.$emit("modal:close");const i=n.response.data.code;i===1||i===2?r.methods.open(n.response.data.message.replaceAll(/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,""),i===1?"Failed to build @web module.":"Failed to build @admin module."):i===0?r.methods.open("Current version matches latest version from update manifest.","Nothing to update"):i===3?r.methods.open('Current version is missing "next" parameter in manifest.',"Invalid update manifest"):i===4&&r.methods.open(n.response.data.message,"Failed to apply patch")})})}},components:{WebIcon:k,DashboardSpinner:w}},t=s=>(I("data-v-293b8d5d"),s=s(),N(),s),F={key:0,class:"ota animate"},S={class:"type"},A={class:"c1"},B=t(()=>e("div",{class:"smTitle"}," Update ",-1)),H={class:"updaterMeta"},L={class:"title"},M=t(()=>e("div",{class:"description"},"New update is ready to be installed.",-1)),P=["innerHTML"],U={class:"c2"},W=t(()=>e("div",{class:"smTitle"}," Current ",-1)),j={class:"versions"},O={class:"version"},q=t(()=>e("div",null,"Phoenix",-1)),z=t(()=>e("div",{class:"separated"},null,-1)),E={class:"version"},Q=t(()=>e("div",null,"PHP",-1)),R={class:"version"},Y=t(()=>e("div",null,"Laravel",-1)),Z={class:"version"},G=t(()=>e("div",null,"Vue.js | Dashboard",-1)),J={class:"version"},K=t(()=>e("div",null,"Vue.js | Web",-1));function X(s,n,i,h,o,p){const u=v("dashboard-spinner"),f=v("web-icon");return o.version?(d(),l("div",F,[e("div",S,[e("div",A,[B,e("div",H,[o.data?(d(),l(c,{key:1},[o.data.code===0?(d(),l(c,{key:0},[m(" Your server is up to date. ")],64)):o.data.code===1?(d(),l(c,{key:1},[e("div",L,a(o.data.version),1),M,e("div",{class:"changelog",innerHTML:h.marked(o.data.changelog)},null,8,P),e("button",{class:V(["btn btn-primary",s.$isDemo?"demoDisable":""]),onClick:n[0]||(n[0]=(...b)=>p.install&&p.install(...b))},[D(f,{icon:"fal fa-sync fa-fw"}),m(" Install")],2)],64)):_("",!0)],64)):(d(),C(u,{key:0}))])]),e("div",U,[W,e("div",j,[e("div",O,[q,e("div",null,a(o.version.phoenix),1)]),z,e("div",E,[Q,e("div",null,a(o.version.php),1)]),e("div",R,[Y,e("div",null,a(o.version.laravel),1)]),e("div",Z,[G,e("div",null,a(o.version.vueAdmin),1)]),e("div",J,[K,e("div",null,a(o.version.vue),1)])])])])])):_("",!0)}const ye=y(T,[["render",X],["__scopeId","data-v-293b8d5d"]]);export{ye as default};
