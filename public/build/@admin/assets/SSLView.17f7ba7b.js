import{_ as h,W as u}from"./app.f6b791b5.js";import{_}from"./LoadingModal.a415cab1.js";import{_ as s}from"./CompilerModalOutput.6f9ec5f7.js";import{D as f}from"./DashboardWarning.95ccc3d6.js";import{f as v,A as o,I as w,a4 as I,s as b,j as y,v as D,g,C as r,x as C,Q as l,e as d,D as x,N as S,O as k}from"./@vue.ca773235.js";import"./vue.9ea8e8a6.js";import"./vuex.497f08d2.js";import"./overlayscrollbars.8d928870.js";import"./apexcharts.8dc8f2aa.js";import"./string-similarity.860833b6.js";import"./gsap.8449ad8c.js";import"./vue-router.63e2ccab.js";import"./vuex-persistedstate.fa252374.js";import"./izitoast.765d8918.js";import"./click-outside-vue3.6791b41e.js";import"./floating-vue.8db45bbf.js";import"./@floating-ui.9bdab495.js";import"./axios.ea6880df.js";import"./@vuepic.b319e7e5.js";import"./date-fns.5b6f9246.js";import"./LoaderAnimation.f430cb8d.js";const N={data(){return{domain:""}},computed:{isInvalidDomain(){return!this.domain.includes(".")||this.domain.includes("/")||this.domain.startsWith("http")||this.domain.endsWith(".")},isCompletelyInvalidDomain(){return!isNaN(parseInt(this.domain.replaceAll(".","")))&&this.domain.includes(".")||this.domain==="localhost"}},mounted(){this.domain=window.location.hostname,this.$bus.$emit("loading:done")},methods:{install(){_.methods.open().then(e=>{window.axios.post("/admin/ssl/install",{domain:this.domain}).then(()=>{e(),setTimeout(()=>{window.$bus.$emit("modal:close"),s.methods.open(`Certificate is installed successfully.
Changes will take place after next server restart: "service apache2 restart"`,"Success")},1e3)}).catch(t=>{window.$bus.$emit("modal:close"),t.response.data.code===1?s.methods.open(`Windows OS is not supported.
You can install certificate manually using certbot if you are using Windows Server (which is not supported officially)`,"Failed to install certificate"):s.methods.open(`Failed to obtain certificate.
You can check server logs for more information.`,"Failed to install certificate")})})}},components:{WebIcon:u,DashboardWarning:f}},m=e=>(S("data-v-746a0ae8"),e=e(),k(),e),V={class:"ssl animate"},W=m(()=>o("div",{class:"description"}," You can issue Let's Encrypt certificate or renew it here. ",-1)),B={class:"domain"},T=m(()=>o("div",{class:"title"},"Domain",-1));function Y(e,t,$,F,n,i){const c=l("dashboard-warning"),p=l("web-icon");return d(),v("div",V,[W,o("div",B,[T,w(o("input",{placeholder:"Domain",type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>n.domain=a)},null,512),[[I,n.domain]])]),i.isCompletelyInvalidDomain||i.isInvalidDomain?(d(),b(c,{key:0,type:"critical"},{default:y(()=>[r(x(i.isCompletelyInvalidDomain?"You can't issue certificates for IPs or local domains.":'This domain is not valid. It should not contain "http(s)://" prefix and trailing slashes.'),1)]),_:1})):D("",!0),o("button",{class:C([[i.isCompletelyInvalidDomain||i.isInvalidDomain?"disabled":"",e.$isDemo?"demoDisable":""],"btn btn-primary"]),onClick:t[1]||(t[1]=(...a)=>i.install&&i.install(...a))},[g(p,{icon:"fal fa-tools fa-fw"}),r(" Install")],2)])}const oe=h(N,[["render",Y],["__scopeId","data-v-746a0ae8"]]);export{oe as default};
