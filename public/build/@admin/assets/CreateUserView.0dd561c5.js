import{_,W as f}from"./app.f6b791b5.js";import{f as n,A as i,I as l,a4 as d,F as v,i as w,v as k,e as c,x as b,g,C as y,D as x,N as C,O as U,Q as R}from"./@vue.ca773235.js";import"./vue.9ea8e8a6.js";import"./vuex.497f08d2.js";import"./overlayscrollbars.8d928870.js";import"./apexcharts.8dc8f2aa.js";import"./string-similarity.860833b6.js";import"./gsap.8449ad8c.js";import"./vue-router.63e2ccab.js";import"./vuex-persistedstate.fa252374.js";import"./izitoast.765d8918.js";import"./click-outside-vue3.6791b41e.js";import"./floating-vue.8db45bbf.js";import"./@floating-ui.9bdab495.js";import"./axios.ea6880df.js";import"./@vuepic.b319e7e5.js";import"./date-fns.5b6f9246.js";const V={data(){return{roles:null,username:"",email:"",password:"",pickedRoles:[]}},methods:{createUser(){window.axios.post("/admin/createUser",{email:this.email,name:this.username,password:this.password,roles:this.pickedRoles}).then(()=>{this.$toast.success("Created successfully"),this.username="",this.email="",this.password=""}).catch(o=>{const t=o.response.data.errors;Object.keys(t).forEach(a=>{const r=t[a];switch(a){case"email":{r.forEach(e=>{e==="validation.email"?this.$toast.error("Invalid email"):e==="validation.unique"&&this.$toast.error("This email is already registered")});break}case"name":{r.forEach(e=>{e==="validation.regex"?this.$toast.error("Login has less than 4 characters or contains invalid symbols"):e==="validation.unique"&&this.$toast.error("This login is already registered, pick something else")});break}case"password":{r.forEach(e=>{e==="validation.min.string"&&this.$toast.error("Password should have at least 5 characters")});break}}})})}},created(){window.axios.post("/admin/roles/all").then(({data:o})=>{this.roles=o.roles,this.$bus.$emit("loading:done")})},components:{WebIcon:f}},m=o=>(C("data-v-6d7e4882"),o=o(),U(),o),I={key:0,class:"createUser animate"},E={class:"type"},T={class:"c1"},N=m(()=>i("div",{class:"smTitle"}," Account ",-1)),D={class:"edit"},S=["disabled"],B={class:"c2"},L=m(()=>i("div",{class:"smTitle"}," Roles ",-1)),q={class:"preview"},A=["onClick"];function F(o,t,a,r,e,p){const h=R("web-icon");return e.roles?(c(),n("div",I,[i("div",E,[i("div",T,[N,i("div",D,[l(i("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>e.username=s),placeholder:"Login"},null,512),[[d,e.username]]),l(i("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=s=>e.email=s),placeholder:"Email"},null,512),[[d,e.email]]),l(i("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=s=>e.password=s),placeholder:"Password"},null,512),[[d,e.password]]),i("button",{class:"btn btn-primary",onClick:t[3]||(t[3]=(...s)=>p.createUser&&p.createUser(...s)),disabled:e.password.length===0||e.email.length===0||e.username.length===0||o.$isDemo},"Create",8,S)])]),i("div",B,[L,i("div",q,[(c(!0),n(v,null,w(e.roles,s=>(c(),n("div",{key:s.id},[i("button",{class:b(["btn",e.pickedRoles.includes(s.id)?"btn-primary":""]),onClick:O=>e.pickedRoles.includes(s.id)?e.pickedRoles=e.pickedRoles.filter(u=>u!==s.id):e.pickedRoles.push(s.id)},[g(h,{icon:e.pickedRoles.includes(s.id)?"fal fa-fw fa-times":"fal fa-fw fa-plus"},null,8,["icon"]),y(" "+x(s.name),1)],10,A)]))),128))])])])])):k("",!0)}const te=_(V,[["render",F],["__scopeId","data-v-6d7e4882"]]);export{te as default};
