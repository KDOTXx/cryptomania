import{_,W as f}from"./app.f6b791b5.js";import{O as h}from"./overlayscrollbars.8d928870.js";import{f as i,A as t,F as p,C as v,v as r,i as k,D as l,g as m,e as n,x as g,N as y,O as w,Q as C}from"./@vue.ca773235.js";import"./vue.9ea8e8a6.js";import"./vuex.497f08d2.js";import"./string-similarity.860833b6.js";import"./gsap.8449ad8c.js";import"./vue-router.63e2ccab.js";import"./vuex-persistedstate.fa252374.js";import"./izitoast.765d8918.js";import"./apexcharts.8dc8f2aa.js";import"./click-outside-vue3.6791b41e.js";import"./floating-vue.8db45bbf.js";import"./@floating-ui.9bdab495.js";import"./axios.ea6880df.js";import"./@vuepic.b319e7e5.js";import"./date-fns.5b6f9246.js";const b={data(){return{deposits:null,page:1,maxPages:null}},mounted(){h(document.querySelector(".deposits .entries"),{scrollbars:{autoHide:"leave"},className:"os-theme-thin-light"})},watch:{page(){this.load()}},methods:{load(s=!1){this.deposits=null,window.axios.post("/admin/wallet/invoices",{page:this.page}).then(({data:o})=>{this.deposits=o,this.maxPages=o.maxPages,s&&this.$bus.$emit("loading:done")})},accept(s){window.axios.post("/admin/wallet/invoice/accept",{id:s}).then(()=>this.load())},cancel(s){window.axios.post("/admin/wallet/invoice/cancel",{id:s}).then(()=>this.load())},jump(){const s=parseInt(prompt(`Enter page (from 1 to ${this.maxPages}):`));s&&!isNaN(s)&&s>=1&&s<=this.maxPages?this.page=s:alert("Invalid page: "+s)}},created(){this.load(!0)},components:{WebIcon:f}},x=s=>(y("data-v-e81e9f54"),s=s(),w(),s),D={class:"deposits"},P={class:"animate"},N={class:"entries"},I=x(()=>t("div",{class:"h"},[t("div",null,"ID"),t("div",null,"User"),t("div",null,"Date"),t("div",null,"Amount"),t("div",null,"Status"),t("div",null,"Manage")],-1)),S=["onClick"],V=["src"],j={key:0,style:{color:"indianred"}},B={key:1,style:{color:"forestgreen"}},O={key:2,style:{color:"orange"}},A=["onClick"],E=["onClick"],F=["onClick"],L={key:0,class:"pagination"},W={class:"current"};function q(s,o,z,H,a,c){const d=C("web-icon");return n(),i("div",D,[t("div",P,[t("div",N,[a.deposits?(n(),i(p,{key:0},[I,a.deposits.invoices.length===0?(n(),i(p,{key:0},[v(" No data to show. ")],64)):r("",!0),(n(!0),i(p,null,k(a.deposits.invoices,e=>(n(),i("div",{class:"entry",key:e.data._id},[t("div",null,l(e.data._id),1),t("div",{onClick:u=>s.$router.push("/admin/user/"+e.user._id)},[t("img",{alt:"",src:e.user.avatar},null,8,V),v(" "+l(e.user.name),1)],8,S),t("div",null,l(new Date(e.data.created_at).toLocaleString()),1),t("div",null,l(e.data.sum)+" "+l(e.data.currency),1),t("div",null,[e.data.status===0?(n(),i("span",j,"Pending")):e.data.status===1?(n(),i("span",B,"Paid")):e.data.status===2?(n(),i("span",O,"Cancelled")):r("",!0)]),t("div",null,[e.data.status===0?(n(),i(p,{key:0},[t("button",{class:g([s.$isDemo?"demoDisable":"","btn btn-primary"]),onClick:u=>c.accept(e.data._id)},[m(d,{icon:"fal fa-fw fa-check"})],10,A),t("button",{class:g([s.$isDemo?"demoDisable":"","btn btn-danger"]),onClick:u=>c.cancel(e.data._id)},[m(d,{icon:"far fa-fw fa-times"})],10,E)],64)):e.data.status===1?(n(),i("button",{key:1,class:g([s.$isDemo?"demoDisable":"","btn btn-danger"]),onClick:u=>c.cancel(e.data._id)},[m(d,{icon:"far fa-fw fa-times"}),v(" Cancel")],10,F)):r("",!0)])]))),128))],64)):r("",!0)]),a.maxPages?(n(),i("div",L,[a.page-2>=1?(n(),i("div",{key:0,class:"prev",onClick:o[0]||(o[0]=e=>a.page-=2)},l(a.page-2),1)):r("",!0),a.page-1>=1?(n(),i("div",{key:1,class:"prev",onClick:o[1]||(o[1]=e=>a.page--)},l(a.page-1),1)):r("",!0),t("div",W,l(a.page),1),a.page+1<=a.maxPages?(n(),i("div",{key:2,class:"next",onClick:o[2]||(o[2]=e=>a.page++)},l(a.page+1),1)):r("",!0),a.page+2<=a.maxPages?(n(),i("div",{key:3,class:"next",onClick:o[3]||(o[3]=e=>a.page+=2)},l(a.page+2),1)):r("",!0),t("div",{class:"jump",onClick:o[4]||(o[4]=(...e)=>c.jump&&c.jump(...e))},[m(d,{icon:"fal fa-fw fa-ellipsis-h"})])])):r("",!0)])])}const ne=_(b,[["render",q],["__scopeId","data-v-e81e9f54"]]);export{ne as default};
