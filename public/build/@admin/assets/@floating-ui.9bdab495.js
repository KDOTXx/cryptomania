function S(t){return t.split("-")[0]}function B(t){return t.split("-")[1]}function $(t){return["top","bottom"].includes(S(t))?"x":"y"}function tt(t){return t==="y"?"height":"width"}function nt(t){let{reference:e,floating:n,placement:o}=t;const i=e.x+e.width/2-n.width/2,l=e.y+e.height/2-n.height/2;let c;switch(S(o)){case"top":c={x:i,y:e.y-n.height};break;case"bottom":c={x:i,y:e.y+e.height};break;case"right":c={x:e.x+e.width,y:l};break;case"left":c={x:e.x-n.width,y:l};break;default:c={x:e.x,y:e.y}}const r=$(o),s=tt(r);switch(B(o)){case"start":c[r]=c[r]-(e[s]/2-n[s]/2);break;case"end":c[r]=c[r]+(e[s]/2-n[s]/2);break}return c}const gt=async(t,e,n)=>{const{placement:o="bottom",strategy:i="absolute",middleware:l=[],platform:c}=n;let r=await c.getElementRects({reference:t,floating:e,strategy:i}),{x:s,y:u}=nt({...r,placement:o}),f=o,m={};for(let a=0;a<l.length;a++){const{name:d,fn:w}=l[a],{x,y:p,data:g,reset:h}=await w({x:s,y:u,initialPlacement:o,placement:f,strategy:i,middlewareData:m,rects:r,platform:c,elements:{reference:t,floating:e}});if(s=x!=null?x:s,u=p!=null?p:u,m={...m,[d]:g!=null?g:{}},h){typeof h=="object"&&(h.placement&&(f=h.placement),h.rects&&(r=h.rects===!0?await c.getElementRects({reference:t,floating:e,strategy:i}):h.rects),{x:s,y:u}=nt({...r,placement:f})),a=-1;continue}}return{x:s,y:u,placement:f,strategy:i,middlewareData:m}};function ht(t){return{top:0,right:0,bottom:0,left:0,...t}}function st(t){return typeof t!="number"?ht(t):{top:t,right:t,bottom:t,left:t}}function K(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function z(t,e){e===void 0&&(e={});const{x:n,y:o,platform:i,rects:l,elements:c,strategy:r}=t,{boundary:s="clippingParents",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:m=!1,padding:a=0}=e,d=st(a),x=c[m?f==="floating"?"reference":"floating":f],p=await i.getClippingClientRect({element:await i.isElement(x)?x:x.contextElement||await i.getDocumentElement({element:c.floating}),boundary:s,rootBoundary:u}),g=K(await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:f==="floating"?{...l.floating,x:n,y:o}:l.reference,offsetParent:await i.getOffsetParent({element:c.floating}),strategy:r}));return{top:p.top-g.top+d.top,bottom:g.bottom-p.bottom+d.bottom,left:p.left-g.left+d.left,right:g.right-p.right+d.right}}const pt=Math.min,E=Math.max;function Q(t,e,n){return E(t,pt(e,n))}const Ft=t=>({name:"arrow",options:t,async fn(e){const{element:n,padding:o=0}=t!=null?t:{},{x:i,y:l,placement:c,rects:r,platform:s}=e;if(n==null)return{};const u=st(o),f={x:i,y:l},m=S(c),a=$(m),d=tt(a),w=await s.getDimensions({element:n}),x=a==="y"?"top":"left",p=a==="y"?"bottom":"right",g=r.reference[d]+r.reference[a]-f[a]-r.floating[d],h=f[a]-r.reference[a],y=await s.getOffsetParent({element:n}),b=y?a==="y"?y.clientHeight||0:y.clientWidth||0:0,k=g/2-h/2,T=u[x],L=b-w[d]-u[p],v=b/2-w[d]/2+k,P=Q(T,v,L);return{data:{[a]:P,centerOffset:v-P}}}}),wt={left:"right",right:"left",bottom:"top",top:"bottom"};function _(t){return t.replace(/left|right|bottom|top/g,e=>wt[e])}function lt(t,e){const n=B(t)==="start",o=$(t),i=tt(o);let l=o==="x"?n?"right":"left":n?"bottom":"top";return e.reference[i]>e.floating[i]&&(l=_(l)),{main:l,cross:_(l)}}const xt={start:"end",end:"start"};function U(t){return t.replace(/start|end/g,e=>xt[e])}const yt=["top","right","bottom","left"],bt=yt.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);function vt(t,e,n){return(t?[...n.filter(i=>B(i)===t),...n.filter(i=>B(i)!==t)]:n.filter(i=>S(i)===i)).filter(i=>t?B(i)===t||(e?U(i)!==i:!1):!0)}const Vt=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,o,i,l,c,r;const{x:s,y:u,rects:f,middlewareData:m,placement:a}=e,{alignment:d=null,allowedPlacements:w=bt,autoAlignment:x=!0,...p}=t;if((n=m.autoPlacement)!=null&&n.skip)return{};const g=vt(d,x,w),h=await z(e,p),y=(o=(i=m.autoPlacement)==null?void 0:i.index)!=null?o:0,b=g[y],{main:k,cross:T}=lt(b,f);if(a!==b)return{x:s,y:u,reset:{placement:g[0]}};const L=[h[S(b)],h[k],h[T]],v=[...(l=(c=m.autoPlacement)==null?void 0:c.overflows)!=null?l:[],{placement:b,overflows:L}],P=g[y+1];if(P)return{data:{index:y+1,overflows:v},reset:{placement:P}};const W=v.slice().sort((N,F)=>N.overflows[0]-F.overflows[0]),H=(r=W.find(N=>{let{overflows:F}=N;return F.every(C=>C<=0)}))==null?void 0:r.placement;return{data:{skip:!0},reset:{placement:H!=null?H:W[0].placement}}}}};function Pt(t){const e=_(t);return[U(t),e,U(e)]}const $t=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,o;const{placement:i,middlewareData:l,rects:c,initialPlacement:r}=e;if((n=l.flip)!=null&&n.skip)return{};const{mainAxis:s=!0,crossAxis:u=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",flipAlignment:a=!0,...d}=t,w=S(i),p=f||(w===r||!a?[_(r)]:Pt(r)),g=[r,...p],h=await z(e,d),y=[];let b=((o=l.flip)==null?void 0:o.overflows)||[];if(s&&y.push(h[w]),u){const{main:v,cross:P}=lt(i,c);y.push(h[v],h[P])}if(b=[...b,{placement:i,overflows:y}],!y.every(v=>v<=0)){var k,T;const v=((k=(T=l.flip)==null?void 0:T.index)!=null?k:0)+1,P=g[v];if(P)return{data:{index:v,overflows:b},reset:{placement:P}};let W="bottom";switch(m){case"bestFit":{var L;const H=(L=b.slice().sort((N,F)=>N.overflows.filter(C=>C>0).reduce((C,J)=>C+J,0)-F.overflows.filter(C=>C>0).reduce((C,J)=>C+J,0))[0])==null?void 0:L.placement;H&&(W=H);break}case"initialPlacement":W=r;break}return{data:{skip:!0},reset:{placement:W}}}return{}}}};function Ct(t){let{placement:e,rects:n,value:o}=t;const i=S(e),l=["left","top"].includes(i)?-1:1,c=typeof o=="function"?o({...n,placement:e}):o,{mainAxis:r,crossAxis:s}=typeof c=="number"?{mainAxis:c,crossAxis:0}:{mainAxis:0,crossAxis:0,...c};return $(i)==="x"?{x:s,y:r*l}:{x:r*l,y:s}}const _t=function(t){return t===void 0&&(t=0),{name:"offset",options:t,fn(e){const{x:n,y:o,placement:i,rects:l}=e,c=Ct({placement:i,rects:l,value:t});return{x:n+c.x,y:o+c.y,data:c}}}};function Ot(t){return t==="x"?"y":"x"}const jt=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:o,placement:i}=e,{mainAxis:l=!0,crossAxis:c=!1,limiter:r={fn:p=>{let{x:g,y:h}=p;return{x:g,y:h}}},...s}=t,u={x:n,y:o},f=await z(e,s),m=$(S(i)),a=Ot(m);let d=u[m],w=u[a];if(l){const p=m==="y"?"top":"left",g=m==="y"?"bottom":"right",h=d+f[p],y=d-f[g];d=Q(h,d,y)}if(c){const p=a==="y"?"top":"left",g=a==="y"?"bottom":"right",h=w+f[p],y=w-f[g];w=Q(h,w,y)}const x=r.fn({...e,[m]:d,[a]:w});return{...x,data:{x:x.x-n,y:x.y-o}}}}},Xt=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n;const{placement:o,rects:i,middlewareData:l}=e,{apply:c,...r}=t;if((n=l.size)!=null&&n.skip)return{};const s=await z(e,r),u=S(o),f=B(o)==="end";let m,a;u==="top"||u==="bottom"?(m=u,a=f?"left":"right"):(a=u,m=f?"top":"bottom");const d=E(s.left,0),w=E(s.right,0),x=E(s.top,0),p=E(s.bottom,0),g={height:i.floating.height-(["left","right"].includes(o)?2*(x!==0||p!==0?x+p:E(s.top,s.bottom)):s[m]),width:i.floating.width-(["top","bottom"].includes(o)?2*(d!==0||w!==0?d+w:E(s.left,s.right)):s[a])};return c==null||c({...g,...i}),{data:{skip:!0},reset:{rects:!0}}}}};function et(t){return(t==null?void 0:t.toString())==="[object Window]"}function A(t){if(t==null)return window;if(!et(t)){const e=t.ownerDocument;return e&&e.defaultView||window}return t}function Y(t){return A(t).getComputedStyle(t)}function O(t){return et(t)?"":t?(t.nodeName||"").toLowerCase():""}function R(t){return t instanceof A(t).HTMLElement}function j(t){return t instanceof A(t).Element}function Rt(t){return t instanceof A(t).Node}function at(t){const e=A(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function I(t){const{overflow:e,overflowX:n,overflowY:o}=Y(t);return/auto|scroll|overlay|hidden/.test(e+o+n)}function St(t){return["table","td","th"].includes(O(t))}function ft(t){const e=navigator.userAgent.toLowerCase().includes("firefox"),n=Y(t);return n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].includes(n.willChange)||e&&n.willChange==="filter"||e&&(n.filter?n.filter!=="none":!1)}const ot=Math.min,V=Math.max,X=Math.round;function M(t,e){e===void 0&&(e=!1);const n=t.getBoundingClientRect();let o=1,i=1;return e&&R(t)&&(o=t.offsetWidth>0&&X(n.width)/t.offsetWidth||1,i=t.offsetHeight>0&&X(n.height)/t.offsetHeight||1),{width:n.width/o,height:n.height/i,top:n.top/i,right:n.right/o,bottom:n.bottom/i,left:n.left/o,x:n.left/o,y:n.top/i}}function D(t){return((Rt(t)?t.ownerDocument:t.document)||window.document).documentElement}function q(t){return et(t)?{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}:{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function ut(t){return M(D(t)).left+q(t).scrollLeft}function At(t){const e=M(t);return X(e.width)!==t.offsetWidth||X(e.height)!==t.offsetHeight}function Dt(t,e,n){const o=R(e),i=D(e),l=M(t,o&&At(e));let c={scrollLeft:0,scrollTop:0};const r={x:0,y:0};if(o||!o&&n!=="fixed")if((O(e)!=="body"||I(i))&&(c=q(e)),R(e)){const s=M(e,!0);r.x=s.x+e.clientLeft,r.y=s.y+e.clientTop}else i&&(r.x=ut(i));return{x:l.left+c.scrollLeft-r.x,y:l.top+c.scrollTop-r.y,width:l.width,height:l.height}}function G(t){return O(t)==="html"?t:t.assignedSlot||t.parentNode||(at(t)?t.host:null)||D(t)}function it(t){return!R(t)||getComputedStyle(t).position==="fixed"?null:t.offsetParent}function Et(t){let e=G(t);for(;R(e)&&!["html","body"].includes(O(e));){if(ft(e))return e;e=e.parentNode}return null}function Z(t){const e=A(t);let n=it(t);for(;n&&St(n)&&getComputedStyle(n).position==="static";)n=it(n);return n&&(O(n)==="html"||O(n)==="body"&&getComputedStyle(n).position==="static"&&!ft(n))?e:n||Et(t)||e}function rt(t){return{width:t.offsetWidth,height:t.offsetHeight}}function kt(t){let{rect:e,offsetParent:n,strategy:o}=t;const i=R(n),l=D(n);if(n===l)return e;let c={scrollLeft:0,scrollTop:0};const r={x:0,y:0};if((i||!i&&o!=="fixed")&&((O(n)!=="body"||I(l))&&(c=q(n)),R(n))){const s=M(n,!0);r.x=s.x+n.clientLeft,r.y=s.y+n.clientTop}return{...e,x:e.x-c.scrollLeft+r.x,y:e.y-c.scrollTop+r.y}}function Tt(t){const e=A(t),n=D(t),o=e.visualViewport;let i=n.clientWidth,l=n.clientHeight,c=0,r=0;return o&&(i=o.width,l=o.height,Math.abs(e.innerWidth/o.scale-o.width)<.01&&(c=o.offsetLeft,r=o.offsetTop)),{width:i,height:l,x:c,y:r}}function Lt(t){var e;const n=D(t),o=q(t),i=(e=t.ownerDocument)==null?void 0:e.body,l=V(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),c=V(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0);let r=-o.scrollLeft+ut(t);const s=-o.scrollTop;return Y(i||n).direction==="rtl"&&(r+=V(n.clientWidth,i?i.clientWidth:0)-l),{width:l,height:c,x:r,y:s}}function mt(t){return["html","body","#document"].includes(O(t))?t.ownerDocument.body:R(t)&&I(t)?t:mt(G(t))}function dt(t,e){var n;e===void 0&&(e=[]);const o=mt(t),i=o===((n=t.ownerDocument)==null?void 0:n.body),l=A(o),c=i?[l].concat(l.visualViewport||[],I(o)?o:[]):o,r=e.concat(c);return i?r:r.concat(dt(G(c)))}function Wt(t,e){const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&at(n)){let o=e;do{if(o&&t===o)return!0;o=o.parentNode||o.host}while(o)}return!1}function Bt(t){const e=M(t),n=e.top+t.clientTop,o=e.left+t.clientLeft;return{top:n,left:o,x:o,y:n,right:o+t.clientWidth,bottom:n+t.clientHeight,width:t.clientWidth,height:t.clientHeight}}function ct(t,e){return e==="viewport"?K(Tt(t)):j(e)?Bt(e):K(Lt(D(t)))}function Mt(t){const e=dt(G(t)),o=["absolute","fixed"].includes(Y(t).position)&&R(t)?Z(t):t;return j(o)?e.filter(i=>j(i)&&Wt(i,o)&&O(i)!=="body"):[]}function Ht(t){let{element:e,boundary:n,rootBoundary:o}=t;const l=[...n==="clippingParents"?Mt(e):[].concat(n),o],c=l[0],r=l.reduce((s,u)=>{const f=ct(e,u);return s.top=V(f.top,s.top),s.right=ot(f.right,s.right),s.bottom=ot(f.bottom,s.bottom),s.left=V(f.left,s.left),s},ct(e,c));return r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}const Nt={getElementRects:t=>{let{reference:e,floating:n,strategy:o}=t;return{reference:Dt(e,Z(n),o),floating:{...rt(n),x:0,y:0}}},convertOffsetParentRelativeRectToViewportRelativeRect:t=>kt(t),getOffsetParent:t=>{let{element:e}=t;return Z(e)},isElement:t=>j(t),getDocumentElement:t=>{let{element:e}=t;return D(e)},getClippingClientRect:t=>Ht(t),getDimensions:t=>{let{element:e}=t;return rt(e)},getClientRects:t=>{let{element:e}=t;return e.getClientRects()}},zt=(t,e,n)=>gt(t,e,{platform:Nt,...n});export{Vt as a,Ft as b,Xt as c,zt as d,$t as f,dt as g,_t as o,jt as s};
